library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

-- Tipo para vetor de 3 inteiros
type int_array3 is array(0 to 2) of integer range 0 to 255;

entity neuronio_binario is
    port (
        valor  : in  int_array3;                -- entradas
        peso   : in  int_array3;                -- pesos
        bias   : in  integer range -32768 to 32767;
        saida  : out std_logic                 -- ativação binária
    );
end entity;

architecture rtl of neuronio_binario is
begin

    process(valor, peso, bias)
        variable acc : integer range -32768 to 32767;
    begin
        -- Inicia acumulador com o bias
        acc := bias;

        -- Soma: acc += valor[i] * peso[i]
        for i in 0 to 2 loop
            acc := acc + (valor(i) * peso(i));
        end loop;

        -- Função de ativação binária (threshold 0)
        if acc > 0 then
            saida <= '1';
        else
            saida <= '0';
        end if;
    end process;

end architecture;
